import{a as h}from"./axios-B6xwUs71.js";import{u as y}from"./index-BeAfN6Kj.js";import{b as E}from"./strings-CdRv5eXv.js";var v="https://js.stripe.com/v3",P=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,p="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",g=function(){for(var r=document.querySelectorAll('script[src^="'.concat(v,'"]')),e=0;e<r.length;e++){var n=r[e];if(P.test(n.src))return n}return null},f=function(r){var e="",n=document.createElement("script");n.src="".concat(v).concat(e);var t=document.head||document.body;if(!t)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return t.appendChild(n),n},L=function(r,e){!r||!r._registerWrapper||r._registerWrapper({name:"stripe-js",version:"3.4.1",startTime:e})},a=null,u=null,l=null,b=function(r){return function(){r(new Error("Failed to load Stripe.js"))}},j=function(r,e){return function(){window.Stripe?r(window.Stripe):e(new Error("Stripe.js not available"))}},C=function(r){return a!==null?a:(a=new Promise(function(e,n){if(typeof window>"u"||typeof document>"u"){e(null);return}if(window.Stripe&&r&&console.warn(p),window.Stripe){e(window.Stripe);return}try{var t=g();if(t&&r)console.warn(p);else if(!t)t=f(r);else if(t&&l!==null&&u!==null){var i;t.removeEventListener("load",l),t.removeEventListener("error",u),(i=t.parentNode)===null||i===void 0||i.removeChild(t),t=f(r)}l=j(e,n),u=b(n),t.addEventListener("load",l),t.addEventListener("error",u)}catch(c){n(c);return}}),a.catch(function(e){return a=null,Promise.reject(e)}))},x=function(r,e,n){if(r===null)return null;var t=r.apply(void 0,e);return L(t,n),t},s,m=!1,S=function(){return s||(s=C(null).catch(function(r){return s=null,Promise.reject(r)}),s)};Promise.resolve().then(function(){return S()}).catch(function(o){m||console.warn(o)});var R=function(){for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];m=!0;var t=Date.now();return S().then(function(i){return x(i,e,t)})};const U=()=>{const{dispatch:o}=y();return{checkSubscription:e=>{const n=e;e&&((async()=>{const i=await R("pk_test_51PRW2aGJyOdTC98YnoQJCsrBfUdajxs1kcqbCFV8nOOHr2UadrrUdGD2GrmCBmaZSiRcfFfhdaJyr8pc6BtX1Rkc00XX4oI78s");try{const w=await(await h.post(`${E}/user/create-checkout-session`,n,{headers:{"Content-Type":"application/json"}})).data,d=i.redirectToCheckout({sessionId:w.id});d.error&&console.log(d.error)}catch(c){console.log(c)}})(),o({type:"PLAN",payload:n})),console.log(n)}}};export{U as u};
